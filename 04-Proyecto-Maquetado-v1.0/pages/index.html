<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viajes M√©xico - Inicio</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>Viajes M√©xico</h1>
            <button class="profile-btn" onclick="navigateTo('profile')">
                <img src="../assets/images/avatar-user.webp" alt="Perfil" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIxdi0yYTQgNCAwIDAgMC00LTRIOGE0IDQgMCAwIDAtNCA0djIiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K'">
            </button>
        </header>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- Filtros r√°pidos -->
            <div class="quick-filters">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="hotels">Hoteles</button>
                <button class="filter-btn" data-filter="restaurants">Restaurantes</button>
                <button class="filter-btn" data-filter="foods">Comida</button>
            </div>

            <!-- Recomendaciones -->
            <section class="section">
                <h2 class="section-title">Recomendaciones para ti</h2>
                <div class="horizontal-scroll" id="recommendations">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>

            <!-- Hoteles populares -->
            <section class="section">
                <h2 class="section-title">Hoteles populares</h2>
                <div class="horizontal-scroll" id="hotels">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>

            <!-- Restaurantes destacados -->
            <section class="section">
                <h2 class="section-title">Restaurantes destacados</h2>
                <div class="horizontal-scroll" id="restaurants">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>

            <!-- Actividades -->
            <section class="section">
                <h2 class="section-title">Actividades</h2>
                <div class="horizontal-scroll" id="activities">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>
        </main>

        <!-- Navegaci√≥n inferior -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active" data-nav="home">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
                <span class="nav-label">Inicio</span>
            </a>
            <a href="#" class="nav-item" data-nav="search">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <span class="nav-label">Buscar</span>
            </a>
            <a href="#" class="nav-item" data-nav="mypackages">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                    <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
                    <line x1="12" y1="22.08" x2="12" y2="12"/>
                </svg>
                <span class="nav-label">Mis Paquetes</span>
            </a>
            <a href="#" class="nav-item" data-nav="profile">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                </svg>
                <span class="nav-label">Perfil</span>
            </a>
        </nav>

        <!-- Bot√≥n flotante -->
        <button class="floating-btn" data-modal="createPackageModal">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        </button>
    </div>

    <script src="../assets/app.js"></script>
    <script>
        // Funciones espec√≠ficas de la p√°gina home
        function loadHomeContent() {
            loadRecommendations();
            loadHotels();
            loadRestaurants();
            loadActivities();
            setupFilterButtons();
        }

        function loadRecommendations() {
            const container = document.getElementById('recommendations');
            const products = AppState.products;
            
            // Mezclar productos para recomendaciones
            const allProducts = [
                ...products.hotels?.slice(0, 2) || [],
                ...products.restaurants?.slice(0, 2) || [],
                ...products.foods?.slice(0, 2) || [],
                ...products.activities?.slice(0, 2) || []
            ];
            
            container.innerHTML = allProducts.map(product => createProductCard(product, 'recommendation')).join('');
        }

        function loadHotels() {
            const container = document.getElementById('hotels');
            const hotels = AppState.products.hotels || [];
            
            container.innerHTML = hotels.map(hotel => createProductCard(hotel, 'hotel')).join('');
        }

        function loadRestaurants() {
            const container = document.getElementById('restaurants');
            const restaurants = AppState.products.restaurants || [];
            
            container.innerHTML = restaurants.map(restaurant => createProductCard(restaurant, 'restaurant')).join('');
        }

        function loadActivities() {
            const container = document.getElementById('activities');
            const activities = AppState.products.activities || [];
            
            container.innerHTML = activities.map(activity => createProductCard(activity, 'activity')).join('');
        }

        function createProductCard(product, type) {
            const isFavorite = AppState.favorites.includes(product.id);
            const favoriteIcon = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
            
            return `
                <div class="card card-fixed" onclick="showProductDetail('${product.id}', '${type}')">
                    <img src="${product.image}" alt="${product.name}" class="card-image" 
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDIwMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjMDY2NjY2Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkltYWdlbiBubyBkaXNwb25pYmxlPC90ZXh0Pgo8L3N2Zz4K'">
                    <div class="card-content">
                        <h3 class="card-title">${product.name}</h3>
                        <p class="card-subtitle">${product.location || product.type || ''}</p>
                        ${product.rating ? `
                            <div class="card-rating">
                                <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                <span class="rating-text">${product.rating}</span>
                            </div>
                        ` : ''}
                        <div class="flex justify-between items-center">
                            <span class="card-price">$${product.price || 'N/A'}</span>
                            <div class="flex gap-2">
                                <button class="btn btn-small" data-add-to-package="${product.id}" 
                                        onclick="event.stopPropagation(); showAddToPackageModal('${product.id}')">
                                    Agregar
                                </button>
                                <button class="btn btn-small" data-favorite="${product.id}" 
                                        onclick="event.stopPropagation(); toggleFavorite('${product.id}')"
                                        style="background: transparent; color: ${isFavorite ? '#ef4444' : '#94a3b8'}; padding: 4px;">
                                    ${favoriteIcon}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function setupFilterButtons() {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remover active de todos
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    // Agregar active al clickeado
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    filterContent(filter);
                });
            });
        }

        function filterContent(filter) {
            const sections = ['recommendations', 'hotels', 'restaurants', 'activities'];
            
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (filter === 'all') {
                    section.style.display = 'flex';
                } else if (sectionId === filter || sectionId === 'recommendations') {
                    section.style.display = 'flex';
                } else {
                    section.style.display = 'none';
                }
            });
        }

        function showProductDetail(productId, type) {
            const product = findProductById(productId);
            if (!product) return;
            
            const modalHTML = `
                <div class="modal-overlay" id="productDetailModal">
                    <div class="modal">
                        <div class="modal-header">
                            <h2 class="modal-title">${product.name}</h2>
                            <button class="modal-close" data-close-modal>&times;</button>
                        </div>
                        <div class="modal-content">
                            <img src="${product.image}" alt="${product.name}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem;"
                                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDQwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMDY2NjY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JbWFnZW4gbm8gZGlzcG9uaWJsZTwvdGV4dD4KPC9zdmc+Cg=='">
                            <p style="margin-bottom: 1rem; line-height: 1.6;">${product.description}</p>
                            ${product.rating ? `
                                <div class="card-rating" style="margin-bottom: 1rem;">
                                    <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                    <span class="rating-text">${product.rating}</span>
                                </div>
                            ` : ''}
                            ${product.location ? `<p><strong>Ubicaci√≥n:</strong> ${product.location}</p>` : ''}
                            ${product.price ? `<p><strong>Precio:</strong> $${product.price} MXN</p>` : ''}
                            ${product.amenities ? `
                                <div style="margin-top: 1rem;">
                                    <strong>Servicios:</strong>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                                        ${product.amenities.map(amenity => `
                                            <span style="background: #f1f5f9; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.875rem;">
                                                ${amenity}
                                            </span>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${product.dishes ? `
                                <div style="margin-top: 1rem;">
                                    <strong>Platos disponibles:</strong>
                                    <div style="margin-top: 0.5rem;">
                                        ${product.dishes.map(dish => `
                                            <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #e2e8f0;">
                                                <span>${dish.name}</span>
                                                <span style="font-weight: 600;">$${dish.price}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" data-close-modal>Cerrar</button>
                            <button class="btn" data-add-to-package="${product.id}" 
                                    onclick="showAddToPackageModal('${product.id}')">
                                Agregar a Paquete
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // Inicializar p√°gina
        if (AppState.currentPage === 'home') {
            loadHomeContent();
        }
    </script>
</body>
</html>
